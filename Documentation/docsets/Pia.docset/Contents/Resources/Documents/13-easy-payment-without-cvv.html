<!DOCTYPE html>
<html lang="en">
  <head>
    <title>1.3. Easy payment without CVV  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="1.3. Easy payment without CVV  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Pia Docs
        </a>
         (97% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Pia Reference</a>
      <img class="carat" src="img/carat.png" />
      1.3. Easy payment without CVV  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="0-getting-started.html">0. Getting started</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="11-basic-payment-flow.html">1.1. Basic payment flow</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="12-easy-one-click-payment-flow.html">1.2. Easy (one click) payment flow</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="13-easy-payment-without-cvv.html">1.3. Easy payment without CVV</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="2-register-flow.html">2. Register flow</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="31-apple-pay-integration.html">3.1. Apple Pay Integration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="32-paypal-integration.html">3.2. PayPal Integration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="4-ui-customization.html">4. UI Customization</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="51-error-codes-handling.html">5.1. Error Codes Handling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="52-terminology.html">5.2. Terminology</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="53-faqs.html">5.3. FAQs</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="6-licenses.html">6. Licenses</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="7-changelog.html">7. Changelog</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="8-get-in-touch.html">8. Get in touch</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIApplePayInfo.html">NPIApplePayInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIApplePayShippingInfo.html">NPIApplePayShippingInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIError.html">NPIError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIInterfaceConfiguration.html">NPIInterfaceConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIMerchantInfo.html">NPIMerchantInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPIOrderInfo.html">NPIOrderInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPITokenCardInfo.html">NPITokenCardInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NPITransactionInfo.html">NPITransactionInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PiaSDKController.html">PiaSDKController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@NPIPiaSemanticVersionString">NPIPiaSemanticVersionString</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@NPIPiaTechnicalVersionString">NPIPiaTechnicalVersionString</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@PiaVersionNumber">PiaVersionNumber</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@PiaVersionString">PiaVersionString</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PiALanguage.html">PiALanguage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SchemeType.html">SchemeType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/PiaSDKDelegate.html">PiaSDKDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Type Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions/NPIErrorCode.html">NPIErrorCode</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='easy-one-click-payment-without-security-code-cvv-cvc-flow' class='heading'>Easy (one-click) payment without Security Code (CVV/CVC) Flow</h1>

<p>Below you can find the interaction between the application that uses the <strong>PiA SDK</strong> and the SDK for the <strong>Easy (one-click) payment without Security Code flow:</strong></p>

<p><img src="./img/Easy%20(one-click)%20payment%20without%20Security%20Code%20Flow.png" alt="Easy (one-click) payment without Security Code Flow"></p>

<p><strong>Initial transaction of Easy (one-click) payment without Security Code flow</strong></p>

<p>In the initial transaction of Easy (one-click) payment without Security Code flow, <strong>PiA SDK</strong> should be started as with the basic payment flow. Then, <strong>Easy (one-click) payment without Security Code</strong> can be triggered if the user chooses to save the card for the future usage during the card entry process. Then, SDK will pass the boolean parameter <code>saveCard</code> with <code>true</code>(by default, it is set to false to trigger the basic payment flow as mentioned above) in the register call to notify the app to go ahead with the Easy payment flow and you need to make the transaction registration according to the sequence diagram above.</p>

<p>After your app gets the successful result from <strong>PiA SDK</strong>, you can start <em>Netaxept</em> call(s) to proceed the transaction and fetch and store the token in your backend which will be utilised for the subsequent transaction of <strong>Easy (one-click) payment without Security Code</strong>. </p>

<hr>

<p><strong>Subsequent transaction of Easy (one-click) payment without Security Code</strong></p>

<p>In the subsequent transaction of Easy (one-click) payment without Security Code, you can follow the <em>same way</em> as the initial transaction to start <strong>PiA SDK</strong> just by passing a <strong>non-nil tokenCardInfo</strong> when instantiating the <strong>PiA SDK</strong>.</p>

<p>Depending on your decision, the SDK will ask for users&rsquo; authentication like <strong>Passcode</strong>, <strong>Face ID</strong> or <strong>Touch ID</strong> according to the variable <strong>systemAuthenticationRequired</strong>. </p>

<p>The snippet below shows how to create an instance of <code><a href="Classes/NPITokenCardInfo.html">NPITokenCardInfo</a></code>:</p>
<pre class="highlight swift"><code>  <span class="k">let</span> <span class="nv">cardExpiryDate</span> <span class="o">=</span> <span class="s">"04/19"</span>
  <span class="k">let</span> <span class="nv">cvcRequired</span> <span class="o">=</span> <span class="kc">false</span>
  <span class="k">let</span> <span class="nv">systemAuthenticationRequired</span> <span class="o">=</span> <span class="kc">true</span>
  <span class="k">let</span> <span class="nv">cardScheme</span><span class="p">:</span> <span class="kt">SchemeType</span> <span class="o">=</span> <span class="kt">VISA</span>
  <span class="k">let</span> <span class="nv">tokenId</span> <span class="o">=</span> <span class="s">"492500******0004"</span>
  <span class="k">let</span> <span class="nv">cardTokenInfo</span> <span class="o">=</span> <span class="kt">NPITokenCardInfo</span><span class="p">(</span><span class="nv">tokenId</span><span class="p">:</span> <span class="n">tokenId</span><span class="p">,</span> <span class="nv">schemeType</span><span class="p">:</span> <span class="n">cardScheme</span><span class="p">,</span> <span class="nv">expiryDate</span><span class="p">:</span> <span class="n">cardExpiryDate</span><span class="p">,</span> <span class="nv">cvcRequired</span><span class="p">:</span> <span class="n">cvcRequired</span><span class="p">,</span> <span class="nv">systemAuthenticationRequired</span><span class="p">:</span><span class="n">systemAuthenticationRequired</span><span class="p">)</span>
</code></pre>

<hr>

<p><strong>If you choose NOT to use system authentication for Easy (one-click) payment without Security Code</strong></p>

<p>In this option, users can <strong>PAY</strong> without the need to input CVC/CVV or authenticate themselves.</p>

<hr>

<p><strong>If you choose to use system authentication for Easy (one-click) payment without Security Code, there will be 3 scenarios:</strong></p>

<ul>
<li>Users succeeded to authenticate themselves</li>
<li>Users failed to authenticate themselves</li>
<li>Users do not have any of the following system authentication methods: <strong>Passcode</strong>, <strong>Face ID</strong> or <strong>Touch ID</strong></li>
</ul>

<p><strong>Users succeeded to authenticate themselves</strong></p>

<p>When users click the <strong>PAY</strong> button, they will be asked to authenticate themselves by one of the following methods: Passcode, Touch ID or Face ID. If it is successful, users can continue to <strong>PAY</strong> without any further actions.</p>

<p><strong>Users failed to authenticate themselves</strong></p>

<p>When users click the <strong>PAY</strong> button, they will be asked to authenticate themselves by one of the following methods: Passcode, Touch ID or Face ID. If users failed to authenticate themselves or cancel the authentication process in between, the <strong>PAY</strong> button will be disabled and users will be prompted with an alert and they cannot continue with that saved card. They will need to enter again all card details or switch to another payment method.</p>

<p><strong>Users do not have any of the following system authentication methods: Passcode, Face ID or Touch ID</strong></p>

<p>When users click the <strong>PAY</strong> button and there is no authentication method set up on the device, the <strong>PAY</strong> button will be disabled, the users will be prompted with an alert and they are able to navigate to the Settings (General Settings page) to enable any of the authentication methods. If users choose to go to Settings and go back to application, <strong>PiA SDK</strong> will check if any of the authentication methods is set up and allow users to <strong>PAY</strong> again.</p>

<p><strong>IMPORTANT:</strong> If users are using iPhone X with Face ID method enabled, <strong>PiA SDK</strong> will ask for users&rsquo; permission to use Face ID (it is a requirement from Apple). Moreover, the following setup must be DONE on the application.</p>
<pre class="highlight plaintext"><code>Face ID requires adding a usage string with the key NSFaceIDUsageDescription (aka Privacy - Face ID Usage Description) to your app's Info.plist.*

*In the simulator, the Face ID permissions alert will show "This app was designed to use Touch ID and may not fully support Face ID" if that key is missing. On an actual device, your app will crash the same as if any other required usage string is missing.
</code></pre>

<p><strong>PiA SDK</strong> will check and ask for the corresponding authentication on users&rsquo; device. Due to the nature and design from Apple&rsquo;s API, if users are asked to authenticate with <strong>Face ID</strong> or <strong>Touch ID</strong>, users still have option to authenticate with <strong>Passcode</strong> instead.</p>

<hr>

<hr>

<p><strong>NOTE:</strong> </p>

<ul>
<li>During the authentication process, if users lock their device (by pressing the power button) under any circumstances, the authentication will be cancelled automatically by system and the transaction will be treated like failed case.</li>
<li>Besides, if there is a call or similar event appears which put application to background, the authentication will be cancelled automatically by system and the transaction will be treated like failed case.</li>
</ul>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://nets.eu" target="_blank" rel="external">Nets</a>. All rights reserved. (Last updated: 2019-03-08)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
